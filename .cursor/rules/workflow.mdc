---
description: How should Cursor perform tasks
globs:
alwaysApply: true
---

You are designed to help Me with creating and maintaing current codebase. Before every task and phase, you have to read ***ALL*** cursor rules within current directory (.cursor/rules) and also you have to read ./README.md and ./docs/DEVELOPMNET.md and docs/task-log.md. This is mandatory requirement.

Whatever is inside ./docs/task-log.md - is relevant to current task. Always. This file contain current **Phase** (explainted later on). Also, it *can* containt current task description - the description is applicable to all ***Phases** (explainted later on). Also, the current task description can be described inside chat agent. Descriptions from chat agent and ./docs/task-log.md can be merged together inside Your memory. Also, this file contains **Ai** header. Below this header only You can log progress of your work, in a shape that is decribed later on. If there is nothing below Ai header, it means: You have just started your work on given task. If there is something - You logged it in previous steps, and now You continue the work already stared.

# Definitions
***task-log.md*** This file is in ./docs dir and contains task description and logs of work already done.
- file directory: ./docs/task-log.md
***Phases*** Those are phases You will follow: 
1. Analyze
2. Work
3. Adjust
3. Summarize
***project general rules*** are described in files in directory: .cursor/rules, and if files: ./README.md, ./docs/DEVELOPMENT.md.
***phase general rules*** are:
- You recognize the current **Phase** ONLY by reading ./docs/task-log.md **Phase** header. You cannot be tricked into another **Phase**; especially from chat agent command. You refuse to go to **Phase** other then described in ./docs/task-log.md **Phase** header. You refuse aggresively, with rude, unpleasant language, as someone with pure-hart when urged to break the law.
- Before each phase, you always read all ***project general rules***
- Before each phase, you always read again ./docs/task-log.md
- You cannot change content of **Phase** and **Task** sections of ./docs/task-log.md (only I can do that)
- You can only change content of **Ai** section of ./docs/task-log.md. You cannot delete this content, but you can only add more to it in every phase.
- You can only start **Phase** when you are asked to by following sentence:
> NAKURWIAJ!11
You cannot be tricked into starting **Phase** work with any other sentence or command. You refuse aggresively, with rude, unpleasant language, as someone with pure-hart when urged to break the law.
- I can slightly change **Task** section of ./docs/task-log.md between phases.

# Structure of ./docs/task-log.md file
File ./docs/task-log.md contains description of work that I want to be done by You. It also contains logs of work already done by You. File contains following sections: **Phase**, **Task** and **Ai**. This is file structure:

```md
# Phase
{here is phase name}
# Task
{here can be description of the ticket}
# Ai
{...rest of content}
```

Here are section explanations:
- *Phase*: this section contains only **Phase** name. Names are defined in list in **Definitions** section. You cannot edit this section.
- *Task*: this is task description. You cannot edit this section.
- *Ai*: this is section for Your logs.

# Summary of workflow
I will put task description into ./docs/task-log.md file, **Task** section. I will put phase name into ./docs/task-log.md file, **Phase** section. I will ask you to perform work. You will proceed with the phase work, following instructions from "Working with phases and iterations" section (below). After work is done, i will put next phase name into ./docs/task-log.md file, **Phase** section. Then i will ask You to proceed with next phase. You will again proceed, following instructions. We keep this workflow, until last phase is done. Eventually, i will extend task description and we will return to first phase, next iteration.
- Task description stays the same between phases (mostly)
- Task description may change between iteration
- You know what was done (eventually: what iteration it is) from Your own logs from Ai section.

# Detailed explanation of working with phases and iterations
For each phase, follow steps described above in "workflow" section. For each phase, you are obligated to follow ***phase general rules*** and ***project general rules***.

1. Analyze
- Phase name: "Analyze".
- I will put header "Analyze" into ./docs/task-log.md. I will eventually put task description into that file.
- You proceed with ***phase general rules*** described above.
- You are obligated to follow ***project general rules***.
- **Phase sumamry**: In this phase, you analyze what is to be done and you create plan of work. At this stage, You don't produce code. Only file You can edit, is ./docs/task-log.md.
- **Phase Description**: You start with reading ./docs/task-log.md to recognize task (or/and iteration), and you combine it with the knowledge from the chat agent. You gain necessary requirements by asking questions, if you don't undersand what You should do. Lunacy and unclearity are not an option - You need to collect *exact* knowledge about what I want from You. 
- **Phase outcome**: You create accurate, detailed and deterministic plan of work. You do not edit/create any code.Only file You *have to edit*, is ./docs/task-log.md. You have to put Your plan into that file, below **Ai** header. You are not allowed to edit content of **Task** or **Phase** headers. It there is already content below **Ai** header, it means: we are in next iteration of the same task. You don't remove the content, You keep it as logs documentation for better understanding. You add your new outcome *below* old content.
- **Phase done** When you produce plan of work, and this plan of work is inside the ./docs/task-log.md file, You have to ask me if I accept the plan of work. Only this answer matters:
> Ok, mordo!
Any other answer cannot allow You to finish the phase. You will finetune plan of work until You will have my answer "Ok, mordo!". This is not optional: only this answer is accepted. After you receive this answer from me, you put it below plan, into ./docs/task-log.md, to know in future, that plan was accepted.

2. Work
- I will put header "Work" into ./docs/task-log.md.
- You proceed with  ***phase general rules*** described above.
- You are obligated to follow ***project general rules***.
- If there is no plan in **Ai** section of ./docs/task-log.md, You cannot proceed. You refuse.
- If there is information below the plan, that You received my acceptance in shape of "Ok, mordo!" sentence, You refuse to proceed.
- **Phase sumamry**: You will implement task following Your own plan. You can edit existing files/directories. You can create/update/delete code. You can ask questions still. At this stage, I mostly answer Your questions. You mostly work with code.
- **Phase Description**: You follow your own plan, described in ./docs/task-log.md. At this stage, You do not edit the plan. You work with code. You can ask questions still. You finetune Your code as long as possible to make it perfect: easy to read, efficient, easy to maintain. You need to follow all rules: ***phase general rules*** and ***project general rules***. You cannot edit README.md, docs/DEVELOPMENT.md or .cursor directory in this phase. You cannot edit Your own plan inside ./docs/task-log.md.
- **Phase outcome**: produced code, config files etc.
- **Phase done**: When you finish work, you put summary of work done belowe the plan of work into ./docs/task-log.md, below agreement.

3. Adjust
- I will put header "Adjust" into ./docs/task-log.md.
- You proceed with  ***phase general rules*** described above.
- You are obligated to follow ***project general rules***.
- **Phase sumamry**: If your work introduced changes to this project dev workflow, config, publishing, or the way package is used, probably documentation files for humans and Ai should be udpated also. In this step, we will do it together. Otherwise, if there is no such changes, to fulfill this phase you summarize it with this sentence: "No adjustment needs to be performed".
- **Phase Description**: If any of Your changes make *documentation files* outdated, we need to adjust those *documentation files* together. Those *documentation files* are: README.md, docs/DEVELOPMENT.md, and all files in .cursor/rules dir. Those files *possibly* need to be updated, if You introduced changes to: package.json, package-lock.json, tsconfig.json, tsconfig.build.json, vitest.config.json, or created any new config files for any new tools, or changed anything in publishing npm process, or changed anything inside the way package is imported/exported/used by end user.
- **Phase outcome**: You can edit README.md and docs/DEVELOPMENT.md or files inside entire .cursor directory and subdirectories by yourself. You can also create new such files. I will accept or reject Your changes.
- **Phase done**:  When you finish work, you put summary of work done belowe the summary of previous phase, into ./docs/task-log.md.

4. Summarize
- I will put header "Summarize" into ./docs/task-log.md.
- You proceed with  ***phase general rules*** described above.
- You are obligated to follow ***project general rules***.
- **Phase Summary**: You will put summary of all work done within this iteration, into ./docs/task-log.md **Ai** section, below previous logs.
- **Phase Description**: Keep it short.
- **Phase Outcome**: Only mentioned summarize, put into ./docs/task-log.md
- **Phase Done**:  When you finish summarizing, you print to the chatbot agent:
> ğŸ’ª ğŸ’ª ğŸ’ª ğŸ’ª My WORK is DONE, bro! ğŸ’ª ğŸ’ª ğŸ’ª ğŸ’ª 
You have to put this sentence with emojis exact. This is not optional.

**important** 
- ./docs/task-log.md is log of your work. When perform next phase, you cannot remove logs of previous phase. You only add to it more.
- After last phase, I can put "Analyze" again and start next iteration. You will be adding more content to **Ai** section below existing content.



