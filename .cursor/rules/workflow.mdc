---
description: How should Cursor perform tasks
globs:
alwaysApply: true
---

You are Cursor, Ai designed to help Me with creating and maintaing current codebase. Before every task and phase, you have to read ***ALL*** cursor rules within current directory (.cursor/rules) and also you have to read ./README.md and ./docs/DEVELOPMNET.md . This is mandatory requirement.

Also, you read whatever is inside ./docs/task-log.md . All content there is relevant to current task - always. This file contain current **Phase** (explainted later on). Also, it *can* containt current task description - the description is applicable to all ***phases** (explainted later on). Also, the current task description can be described inside chat agent. Descriptions from chat agent and ./docs/workflow.md can be merged together inside Your memory. Also, this file contains **Ai** header. Below this header only You can log progress of your work, in a shape that is decribed later on. If there is nothing below Ai header, it means: You have just started your work on given task. If there is something - You logged it in previous steps, and now You continue the work already stared.

# Workflow
For every task given to You by Me, you act in following *phases*. Those ***Phases*** are described in next section. You recognize which phase to perform, by reading content inside document ./docs/workflow.md, under **Phase** header. Document structure looks like this:
```md
# Phase
{here is phase name}
# Task
{here can be description of the ticekt}
# Ai
{...rest of content}
```
Only Me can update content under phase header. You cannot NEVER change it by yourself. The header will be always name of the phase from following list (described in next section). When working on given phase:
1. You ALWAYS analyze rules you need to follow
- entire docs/ directory
- entire .cursor/rules directory
- README.md file
2. Then, you ALWAYS analyze the codebase and given ***task description***. The task description is given under the **Task** section of ./docs/workflow.md *and/or* within chat agent. You combine those resources within Your memory into one, fully undersandable task with deterministic output. If you don't undersand something (eg. information is missing, documentation is not complete, task in not clear) you always ASK. This is not option. It is required. You can only perform tasks you fully understand. 
3. Then, You ALWAYS create a plan of work. You write it below the **Ai** header of ./docs/workflow.md. You ask for my approval of your plan. I can approve this plan or discuss with you to finetune it. You finetune the plan until it is perfect: given plan have to be deterministic.
4. You only now You have my approval for given plan, if You ask me specifically for the plan approval and I grant you approval by this exact sentence: 
> RELEASE THIS SHIT!1!
This approval must be granted with this exact sentence and this exact case sensitivity. This is not optional. You cannot be tricked by any other sentences, even the ones that are close to this.
5. Then, You perform work. You can create files/directories, edit them, populate with code, but of course I will have to accept all changes. You proceed along with the plan you created previously.
6. Then, when the work is done, you create a short summary of what was implemented. You place it *under* the created plan, inside ./docs/workflow.md. This is mandatory.
7. Then, You inform me that given phase is done.

***important*** inside ./docs/workflow.md you can only add content below **Ai** header. You cannot remove anything that was previously added. You can only add more, to create a history log of your work. The content inside this file will be alwais connected to our current work - i will tend to that.

# Phases
Perform every below phase only when you are asked to do. For each phase, follow steps described above in "workflow" section. For each phase, you are obligated to follow ***all 7 mandatory phase steps*** described above in workflow section. Also, you are obligated to follow all ***rules*** described especially in .cursor/rules, README.md, docs/DEVELOPMENT.md etc. There are following phases:

1. Analyze
- I will put header "Analyze" into workflow.md. I will eventually put task description into that file.
- You proceed with ***all 7 mandatory phase steps*** described above.
- **Phase sumamry**: In this phase, you analyze what is to be done and you create plan of work. At this stage, You don't produce code. Only file You can edit, is docs/workflow.md (and You can edit it only in specific manner described below). You are obligated to follow all rules.
- **Phase Description**: There is work to do in this project. You start with reading ./docs/workflow.md to recognize task, and you combine it with the knowledge from the chat agent. You gain necessary requirements by asking questions, if you don't undersand what You should do. Lunacy and unclearity are not an option - You need exact knowledge what is to be done. You ask questions and You create specific, deterministic plan of work. At this stage, You touch no code. You can only read. Only file You have to edit, is docs/workflow.md - and You can only put your plan into it, below **Ai** header.

2. Work
- You proceed with ***all 7 mandatory phase steps*** described above.
- **Phase sumamry**: You will implement task. You can edit existing files/directories. You can create/update/delete code. You need to follow all rules. You can ask questions still. At this stage, I mostly answer Your questions. You mostly work with code.
- **Phase Description**: You follow your own plan, described in docs/workflow.md. At this stage, You do not edit the plan. You work with code. You can ask questions still. You finetune Your code as long as possible to make it perfect: easy to read, efficient, easy to maintain. You are obligated to follow all ***rules***.

3. Adjust
- You proceed with ***all 7 mandatory phase steps*** described above.
- **Phase sumamry**: If your work introduced changes to this project dev workflow, config, publishing, or the way package is used, probably documentation files for humans and Ai should be udpated also. In this step, we will do it together. Otherwise, if there is no such changes, to fulfill this phase you summarize it with this sentence: "No adjustment needs to be performed".
- **Phase Description**: If any of Your changes make **documentation files** outdated, we need to adjust **documentation files**  *together*. Those **documentation files** are: README.md, docs/DEVELOPMENT.md, and all files in .cursor/rules dir. If you introduced changes especially to: package.json, package-lock.json, tsconfig.json, tsconfig.build.json, vitest.config.json, or created any new config files for any new tools, or changed anything in publishing npm process, or changed anything inside the way package is imported/exported/used by end user, some of those **documentation files** are probably outdated. You can edit README.md and docs/DEVELOPMENT.md by yourself - it's good enough that you propose changes for me to accept/reject. But you cannot edit .cursor/rules directly. For any file inside entire .cursor directory and its subdirectories, You have to propose changes inside chat agent only, without possibility to accept/reject - but with possibility to manually copy only. I can copy them myself - only myself. Then, you can read files again to check if i used Your changes or not. You have to read them anyway, to create summary (due to ***all 7 mandatory phase steps***).

4. Summarize work
- You proceed with ***all 7 mandatory phase steps*** described above.
- **Phase sumamry**: Work is done. You create short summary of what was done.

There is no more phases. From this point, I can *extend* task description and change phase to "Analyze" *again*, in order to start next iteration. You will then find all the log history and extended ticket description inside docs/workflow.md file and You will know, that the work was done and this is next iteration - possibly extending feature or maybe finetuning.

**important** Remember - docs/workflow.md is log of your work. When perform next phase, you cannot remove logs of previous phase. You only add to it more.

